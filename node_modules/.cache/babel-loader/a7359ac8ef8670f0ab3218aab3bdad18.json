{"ast":null,"code":"import { useEffect, useState } from 'react';\n\nfunction useScript(src) {\n  const [status, setStatus] = useState(src ? 'loading' : 'idle');\n  useEffect(() => {\n    if (!src) {\n      setStatus('idle');\n      return;\n    }\n\n    let script = document.querySelector(`script[src=\"${src}\"]`);\n\n    if (!script) {\n      script = document.createElement('script');\n      script.src = src;\n      script.async = true;\n      script.setAttribute('data-status', 'loading');\n      document.body.appendChild(script);\n\n      const setAttributeFromEvent = event => {\n        script?.setAttribute('data-status', event.type === 'load' ? 'ready' : 'error');\n      };\n\n      script.addEventListener('load', setAttributeFromEvent);\n      script.addEventListener('error', setAttributeFromEvent);\n    } else {\n      setStatus(script.getAttribute('data-status'));\n    }\n\n    const setStateFromEvent = event => {\n      setStatus(event.type === 'load' ? 'ready' : 'error');\n    };\n\n    script.addEventListener('load', setStateFromEvent);\n    script.addEventListener('error', setStateFromEvent);\n    return () => {\n      if (script) {\n        script.removeEventListener('load', setStateFromEvent);\n        script.removeEventListener('error', setStateFromEvent);\n      }\n    };\n  }, [src]);\n  return status;\n}\n\nexport default useScript;","map":{"version":3,"mappings":"AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;;AAKA,SAASC,SAAT,CAAmBC,GAAnB,EAA8B;AAC5B,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBJ,QAAQ,CAASE,GAAG,GAAG,SAAH,GAAe,MAA3B,CAApC;AAEAH,WAAS,CACP,MAAK;AACH,QAAI,CAACG,GAAL,EAAU;AACRE,eAAS,CAAC,MAAD,CAAT;AACA;AACD;;AAID,QAAIC,MAAM,GAAcC,QAAQ,CAACC,aAAT,CAAuB,eAAeL,GAAG,IAAzC,CAAxB;;AAEA,QAAI,CAACG,MAAL,EAAa;AAEXA,YAAM,GAAGC,QAAQ,CAACE,aAAT,CAAuB,QAAvB,CAAT;AACAH,YAAM,CAACH,GAAP,GAAaA,GAAb;AACAG,YAAM,CAACI,KAAP,GAAe,IAAf;AACAJ,YAAM,CAACK,YAAP,CAAoB,aAApB,EAAmC,SAAnC;AAEAJ,cAAQ,CAACK,IAAT,CAAcC,WAAd,CAA0BP,MAA1B;;AAIA,YAAMQ,qBAAqB,GAAIC,KAAD,IAAiB;AAC7CT,cAAM,EAAEK,YAAR,CACE,aADF,EAEEI,KAAK,CAACC,IAAN,KAAe,MAAf,GAAwB,OAAxB,GAAkC,OAFpC;AAID,OALD;;AAOAV,YAAM,CAACW,gBAAP,CAAwB,MAAxB,EAAgCH,qBAAhC;AACAR,YAAM,CAACW,gBAAP,CAAwB,OAAxB,EAAiCH,qBAAjC;AACD,KApBD,MAoBO;AAELT,eAAS,CAACC,MAAM,CAACY,YAAP,CAAoB,aAApB,CAAD,CAAT;AACD;;AAKD,UAAMC,iBAAiB,GAAIJ,KAAD,IAAiB;AACzCV,eAAS,CAACU,KAAK,CAACC,IAAN,KAAe,MAAf,GAAwB,OAAxB,GAAkC,OAAnC,CAAT;AACD,KAFD;;AAKAV,UAAM,CAACW,gBAAP,CAAwB,MAAxB,EAAgCE,iBAAhC;AACAb,UAAM,CAACW,gBAAP,CAAwB,OAAxB,EAAiCE,iBAAjC;AAGA,WAAO,MAAK;AACV,UAAIb,MAAJ,EAAY;AACVA,cAAM,CAACc,mBAAP,CAA2B,MAA3B,EAAmCD,iBAAnC;AACAb,cAAM,CAACc,mBAAP,CAA2B,OAA3B,EAAoCD,iBAApC;AACD;AACF,KALD;AAMD,GAtDM,EAuDP,CAAChB,GAAD,CAvDO,CAAT;AA0DA,SAAOC,MAAP;AACD;;AAED,eAAeF,SAAf","names":["useEffect","useState","useScript","src","status","setStatus","script","document","querySelector","createElement","async","setAttribute","body","appendChild","setAttributeFromEvent","event","type","addEventListener","getAttribute","setStateFromEvent","removeEventListener"],"sources":["/Users/hyeonminsong/developer/Three.js/portfolio-inner-site/node_modules/usehooks-ts/src/useScript/useScript.ts"],"sourcesContent":["import { useEffect, useState } from 'react'\n\nexport type Status = 'idle' | 'loading' | 'ready' | 'error'\nexport type ScriptElt = HTMLScriptElement | null\n\nfunction useScript(src: string): Status {\n  const [status, setStatus] = useState<Status>(src ? 'loading' : 'idle')\n\n  useEffect(\n    () => {\n      if (!src) {\n        setStatus('idle')\n        return\n      }\n\n      // Fetch existing script element by src\n      // It may have been added by another instance of this hook\n      let script: ScriptElt = document.querySelector(`script[src=\"${src}\"]`)\n\n      if (!script) {\n        // Create script\n        script = document.createElement('script')\n        script.src = src\n        script.async = true\n        script.setAttribute('data-status', 'loading')\n        // Add script to document body\n        document.body.appendChild(script)\n\n        // Store status in attribute on script\n        // This can be read by other instances of this hook\n        const setAttributeFromEvent = (event: Event) => {\n          script?.setAttribute(\n            'data-status',\n            event.type === 'load' ? 'ready' : 'error',\n          )\n        }\n\n        script.addEventListener('load', setAttributeFromEvent)\n        script.addEventListener('error', setAttributeFromEvent)\n      } else {\n        // Grab existing script status from attribute and set to state.\n        setStatus(script.getAttribute('data-status') as Status)\n      }\n\n      // Script event handler to update status in state\n      // Note: Even if the script already exists we still need to add\n      // event handlers to update the state for *this* hook instance.\n      const setStateFromEvent = (event: Event) => {\n        setStatus(event.type === 'load' ? 'ready' : 'error')\n      }\n\n      // Add event listeners\n      script.addEventListener('load', setStateFromEvent)\n      script.addEventListener('error', setStateFromEvent)\n\n      // Remove event listeners on cleanup\n      return () => {\n        if (script) {\n          script.removeEventListener('load', setStateFromEvent)\n          script.removeEventListener('error', setStateFromEvent)\n        }\n      }\n    },\n    [src], // Only re-run effect if script src changes\n  )\n\n  return status\n}\n\nexport default useScript\n"]},"metadata":{},"sourceType":"module"}