{"ast":null,"code":"var _jsxFileName = \"/Users/hyeonminsong/developer/Three.js/portfolio-inner-site/src/components/os/Window.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport colors from '../../constants/colors';\nimport Colors from '../../constants/colors';\nimport Icon from '../general/Icon';\nimport Button from './Button';\nimport DragIndicator from './DragIndicator';\nimport ResizeIndicator from './ResizeIndicator';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Window = props => {\n  _s();\n\n  const windowRef = useRef(null);\n  const dragRef = useRef(null);\n  const contentRef = useRef(null);\n  const dragProps = useRef();\n  const resizeRef = useRef(null);\n  const [top, setTop] = useState(props.top);\n  const [left, setLeft] = useState(props.left);\n  const lastClickInside = useRef(false);\n  const [width, setWidth] = useState(props.width);\n  const [height, setHeight] = useState(props.height);\n  const [contentWidth, setContentWidth] = useState(props.width);\n  const [contentHeight, setContentHeight] = useState(props.height);\n  const [windowActive, setWindowActive] = useState(true);\n  const [isMaximized, setIsMaximized] = useState(false);\n  const [preMaxSize, setPreMaxSize] = useState({\n    width,\n    height,\n    top,\n    left\n  });\n  const [isDragging, setIsDragging] = useState(false);\n  const [isResizing, setIsResizing] = useState(false);\n\n  const startResize = event => {\n    event.preventDefault();\n    setIsResizing(true);\n    window.addEventListener('mousemove', onResize, false);\n    window.addEventListener('mouseup', stopResize, false);\n  };\n\n  const onResize = _ref => {\n    let {\n      clientX,\n      clientY\n    } = _ref;\n    const curWidth = clientX - left;\n    const curHeight = clientY - top;\n    if (curWidth > 520) resizeRef.current.style.width = `${curWidth}px`;\n    if (curHeight > 220) resizeRef.current.style.height = `${curHeight}px`;\n    resizeRef.current.style.opacity = 1;\n  };\n\n  const stopResize = () => {\n    setIsResizing(false);\n    setWidth(resizeRef.current.style.width);\n    setHeight(resizeRef.current.style.height);\n    resizeRef.current.style.opacity = 0;\n    window.removeEventListener('mousemove', onResize, false);\n    window.removeEventListener('mouseup', stopResize, false);\n  };\n\n  const startDrag = event => {\n    const {\n      clientX,\n      clientY\n    } = event;\n    setIsDragging(true);\n    event.preventDefault();\n    dragProps.current = {\n      dragStartX: clientX,\n      dragStartY: clientY\n    };\n    window.addEventListener('mousemove', onDrag, false);\n    window.addEventListener('mouseup', stopDrag, false);\n  };\n\n  const onDrag = _ref2 => {\n    let {\n      clientX,\n      clientY\n    } = _ref2;\n    let {\n      x,\n      y\n    } = getXYFromDragProps(clientX, clientY);\n    dragRef.current.style.transform = `translate(${x}px, ${y}px)`;\n    dragRef.current.style.opacity = 1;\n  };\n\n  const stopDrag = _ref3 => {\n    let {\n      clientX,\n      clientY\n    } = _ref3;\n    setIsDragging(false); // dragRef.current.style.opacity = 0;\n\n    const {\n      x,\n      y\n    } = getXYFromDragProps(clientX, clientY);\n    setTop(y);\n    setLeft(x);\n    window.removeEventListener('mousemove', onDrag, false);\n    window.removeEventListener('mouseup', stopDrag, false);\n  };\n\n  const getXYFromDragProps = (clientX, clientY) => {\n    if (!dragProps.current) return {\n      x: 0,\n      y: 0\n    };\n    const {\n      dragStartX,\n      dragStartY\n    } = dragProps.current;\n    const x = clientX - dragStartX + left;\n    const y = clientY - dragStartY + top;\n    return {\n      x,\n      y\n    };\n  };\n\n  useEffect(() => {\n    dragRef.current.style.transform = `translate(${left}px, ${top}px)`;\n  });\n  useEffect(() => {\n    props.onWidthChange && props.onWidthChange(contentWidth);\n  }, [props.onWidthChange, contentWidth]); // eslint-disable-line\n\n  useEffect(() => {\n    props.onHeightChange && props.onHeightChange(contentHeight);\n  }, [props.onHeightChange, contentHeight]); // eslint-disable-line\n\n  useEffect(() => {\n    setContentWidth(contentRef.current.getBoundingClientRect().width);\n  }, [width]);\n  useEffect(() => {\n    setContentHeight(contentRef.current.getBoundingClientRect().height);\n  }, [height]);\n\n  const maximize = () => {\n    if (isMaximized) {\n      setWidth(preMaxSize.width);\n      setHeight(preMaxSize.height);\n      setTop(preMaxSize.top);\n      setLeft(preMaxSize.left);\n      setIsMaximized(false);\n    } else {\n      setPreMaxSize({\n        width,\n        height,\n        top,\n        left\n      });\n      setWidth(window.innerWidth);\n      setHeight(window.innerHeight - 32);\n      setTop(0);\n      setLeft(0);\n      setIsMaximized(true);\n    }\n  };\n\n  const onCheckClick = () => {\n    if (lastClickInside.current) {\n      setWindowActive(true);\n    } else {\n      setWindowActive(false);\n    }\n\n    lastClickInside.current = false;\n  };\n\n  useEffect(() => {\n    window.addEventListener('mousedown', onCheckClick, false);\n    return () => {\n      window.removeEventListener('mousedown', onCheckClick, false);\n    };\n  }, []);\n\n  const onWindowInteract = () => {\n    props.onInteract();\n    setWindowActive(true);\n    lastClickInside.current = true;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    onMouseDown: onWindowInteract,\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: Object.assign({}, styles.window, {\n        width,\n        height,\n        top,\n        left\n      }),\n      ref: windowRef,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.windowBorderOuter,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.windowBorderInner,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.dragHitbox,\n            onMouseDown: startDrag\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: props.rainbow ? 'rainbow-wrapper' : '',\n            style: Object.assign({}, styles.topBar, props.windowBarColor && {\n              backgroundColor: props.windowBarColor\n            }, !windowActive && {\n              backgroundColor: Colors.darkGray\n            }),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.windowHeader,\n              children: [props.windowBarIcon ? /*#__PURE__*/_jsxDEV(Icon, {\n                icon: props.windowBarIcon,\n                style: Object.assign({}, styles.windowBarIcon, !windowActive && {\n                  opacity: 0.5\n                }),\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 37\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  width: 16\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: windowActive ? {} : {\n                  color: colors.lightGray\n                },\n                className: \"showcase-header\",\n                children: props.windowTitle\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.windowTopButtons,\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                icon: \"minimize\",\n                onClick: props.minimizeWindow\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                icon: \"maximize\",\n                onClick: maximize\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  paddingLeft: 2\n                },\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  icon: \"close\",\n                  onClick: props.closeWindow\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 254,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: Object.assign({}, styles.contentOuter, {// zIndex: isDragging || isResizing ? 0 : 100,\n            }),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.contentInner,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: styles.content,\n                ref: contentRef,\n                children: props.children\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            onMouseDown: startResize,\n            style: styles.resizeHitbox\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.bottomBar,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: Object.assign({}, styles.insetBorder, {\n                flex: 5 / 7,\n                alignItems: 'center'\n              }),\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  fontSize: 12,\n                  marginLeft: 4,\n                  fontFamily: 'MSSerif'\n                },\n                children: props.bottomLeftText\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: Object.assign({}, styles.insetBorder, styles.bottomSpacer)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: Object.assign({}, styles.insetBorder, styles.bottomSpacer)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: Object.assign({}, styles.insetBorder, styles.bottomResizeContainer),\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  alignItems: 'flex-end'\n                },\n                children: /*#__PURE__*/_jsxDEV(Icon, {\n                  size: 12,\n                  icon: \"windowResize\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 319,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: !isResizing ? {\n        zIndex: -10000,\n        pointerEvents: 'none'\n      } : {\n        zIndex: 1000,\n        cursor: 'nwse-resize',\n        mixBlendMode: 'difference'\n      },\n      children: /*#__PURE__*/_jsxDEV(ResizeIndicator, {\n        top: top,\n        left: left,\n        width: width,\n        height: height,\n        resizeRef: resizeRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: !isDragging ? {\n        zIndex: -10000,\n        pointerEvents: 'none'\n      } : {\n        zIndex: 1000,\n        cursor: 'move',\n        mixBlendMode: 'difference'\n      },\n      children: /*#__PURE__*/_jsxDEV(DragIndicator, {\n        width: width,\n        height: height,\n        dragRef: dragRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 193,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Window, \"mCgt+TAFKNGU8F6gMIB/j9fGFoc=\");\n\n_c = Window;\nconst styles = {\n  window: {\n    backgroundColor: Colors.lightGray,\n    position: 'absolute'\n  },\n  dragHitbox: {\n    position: 'absolute',\n    width: 'calc(100% - 70px)',\n    height: 48,\n    zIndex: 10000,\n    top: -8,\n    left: -4,\n    cursor: 'move'\n  },\n  windowBorderOuter: {\n    border: `1px solid ${Colors.black}`,\n    borderTopColor: colors.lightGray,\n    borderLeftColor: colors.lightGray,\n    flex: 1\n  },\n  windowBorderInner: {\n    border: `1px solid ${Colors.darkGray}`,\n    borderTopColor: colors.white,\n    borderLeftColor: colors.white,\n    flex: 1,\n    padding: 2,\n    flexDirection: 'column'\n  },\n  resizeHitbox: {\n    position: 'absolute',\n    width: 60,\n    height: 60,\n    bottom: -20,\n    right: -20,\n    cursor: 'nwse-resize'\n  },\n  topBar: {\n    backgroundColor: Colors.blue,\n    width: '100%',\n    height: 20,\n    alignItems: 'center',\n    paddingRight: 2,\n    boxSizing: 'border-box'\n  },\n  contentOuter: {\n    border: `1px solid ${Colors.white}`,\n    borderTopColor: colors.darkGray,\n    borderLeftColor: colors.darkGray,\n    flexGrow: 1,\n    marginTop: 8,\n    marginBottom: 8,\n    overflow: 'hidden'\n  },\n  contentInner: {\n    border: `1px solid ${Colors.lightGray}`,\n    borderTopColor: colors.black,\n    borderLeftColor: colors.black,\n    flex: 1,\n    overflow: 'hidden'\n  },\n  content: {\n    flex: 1,\n    position: 'relative',\n    // overflow: 'scroll',\n    overflowX: 'hidden',\n    backgroundColor: Colors.white\n  },\n  bottomBar: {\n    flexShrink: 1,\n    width: '100%',\n    height: 20\n  },\n  bottomSpacer: {\n    width: 16,\n    marginLeft: 2\n  },\n  insetBorder: {\n    border: `1px solid ${Colors.white}`,\n    borderTopColor: colors.darkGray,\n    borderLeftColor: colors.darkGray,\n    padding: 2\n  },\n  bottomResizeContainer: {\n    flex: 2 / 7,\n    justifyContent: 'flex-end',\n    padding: 0,\n    marginLeft: 2\n  },\n  windowTopButtons: {\n    // zIndex: 10000,\n    alignItems: 'center'\n  },\n  windowHeader: {\n    flex: 1 // justifyContent: 'center',\n    // alignItems: 'center',\n\n  },\n  windowBarIcon: {\n    paddingLeft: 4,\n    paddingRight: 4\n  }\n};\nexport default Window;\n\nvar _c;\n\n$RefreshReg$(_c, \"Window\");","map":{"version":3,"sources":["/Users/hyeonminsong/developer/Three.js/portfolio-inner-site/src/components/os/Window.tsx"],"names":["React","useEffect","useRef","useState","colors","Colors","Icon","Button","DragIndicator","ResizeIndicator","Window","props","windowRef","dragRef","contentRef","dragProps","resizeRef","top","setTop","left","setLeft","lastClickInside","width","setWidth","height","setHeight","contentWidth","setContentWidth","contentHeight","setContentHeight","windowActive","setWindowActive","isMaximized","setIsMaximized","preMaxSize","setPreMaxSize","isDragging","setIsDragging","isResizing","setIsResizing","startResize","event","preventDefault","window","addEventListener","onResize","stopResize","clientX","clientY","curWidth","curHeight","current","style","opacity","removeEventListener","startDrag","dragStartX","dragStartY","onDrag","stopDrag","x","y","getXYFromDragProps","transform","onWidthChange","onHeightChange","getBoundingClientRect","maximize","innerWidth","innerHeight","onCheckClick","onWindowInteract","onInteract","styles","container","Object","assign","windowBorderOuter","windowBorderInner","dragHitbox","rainbow","topBar","windowBarColor","backgroundColor","darkGray","windowHeader","windowBarIcon","color","lightGray","windowTitle","windowTopButtons","minimizeWindow","paddingLeft","closeWindow","contentOuter","contentInner","content","children","resizeHitbox","bottomBar","insetBorder","flex","alignItems","fontSize","marginLeft","fontFamily","bottomLeftText","bottomSpacer","bottomResizeContainer","zIndex","pointerEvents","cursor","mixBlendMode","position","border","black","borderTopColor","borderLeftColor","white","padding","flexDirection","bottom","right","blue","paddingRight","boxSizing","flexGrow","marginTop","marginBottom","overflow","overflowX","flexShrink","justifyContent"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { IconName } from '../../assets/icons';\nimport colors from '../../constants/colors';\nimport Colors from '../../constants/colors';\nimport Icon from '../general/Icon';\nimport Button from './Button';\nimport DragIndicator from './DragIndicator';\nimport ResizeIndicator from './ResizeIndicator';\n\nexport interface WindowProps {\n    closeWindow: () => void;\n    minimizeWindow: () => void;\n    onInteract: () => void;\n    width: number;\n    height: number;\n    top: number;\n    left: number;\n    windowTitle?: string;\n    bottomLeftText?: string;\n    rainbow?: boolean;\n    windowBarColor?: string;\n    windowBarIcon?: IconName;\n    onWidthChange?: (width: number) => void;\n    onHeightChange?: (height: number) => void;\n}\n\nconst Window: React.FC<WindowProps> = (props) => {\n    const windowRef = useRef<any>(null);\n    const dragRef = useRef<any>(null);\n    const contentRef = useRef<any>(null);\n\n    const dragProps = useRef<{\n        dragStartX: any;\n        dragStartY: any;\n    }>();\n\n    const resizeRef = useRef<any>(null);\n\n    const [top, setTop] = useState(props.top);\n    const [left, setLeft] = useState(props.left);\n\n    const lastClickInside = useRef(false);\n\n    const [width, setWidth] = useState(props.width);\n    const [height, setHeight] = useState(props.height);\n\n    const [contentWidth, setContentWidth] = useState(props.width);\n    const [contentHeight, setContentHeight] = useState(props.height);\n\n    const [windowActive, setWindowActive] = useState(true);\n\n    const [isMaximized, setIsMaximized] = useState(false);\n    const [preMaxSize, setPreMaxSize] = useState({\n        width,\n        height,\n        top,\n        left,\n    });\n\n    const [isDragging, setIsDragging] = useState(false);\n    const [isResizing, setIsResizing] = useState(false);\n\n    const startResize = (event: any) => {\n        event.preventDefault();\n        setIsResizing(true);\n        window.addEventListener('mousemove', onResize, false);\n        window.addEventListener('mouseup', stopResize, false);\n    };\n\n    const onResize = ({ clientX, clientY }: any) => {\n        const curWidth = clientX - left;\n        const curHeight = clientY - top;\n        if (curWidth > 520) resizeRef.current.style.width = `${curWidth}px`;\n        if (curHeight > 220) resizeRef.current.style.height = `${curHeight}px`;\n        resizeRef.current.style.opacity = 1;\n    };\n\n    const stopResize = () => {\n        setIsResizing(false);\n        setWidth(resizeRef.current.style.width);\n        setHeight(resizeRef.current.style.height);\n        resizeRef.current.style.opacity = 0;\n        window.removeEventListener('mousemove', onResize, false);\n        window.removeEventListener('mouseup', stopResize, false);\n    };\n\n    const startDrag = (event: any) => {\n        const { clientX, clientY } = event;\n        setIsDragging(true);\n        event.preventDefault();\n        dragProps.current = {\n            dragStartX: clientX,\n            dragStartY: clientY,\n        };\n        window.addEventListener('mousemove', onDrag, false);\n        window.addEventListener('mouseup', stopDrag, false);\n    };\n\n    const onDrag = ({ clientX, clientY }: any) => {\n        let { x, y } = getXYFromDragProps(clientX, clientY);\n        dragRef.current.style.transform = `translate(${x}px, ${y}px)`;\n        dragRef.current.style.opacity = 1;\n    };\n\n    const stopDrag = ({ clientX, clientY }: any) => {\n        setIsDragging(false);\n        // dragRef.current.style.opacity = 0;\n        const { x, y } = getXYFromDragProps(clientX, clientY);\n        setTop(y);\n        setLeft(x);\n        window.removeEventListener('mousemove', onDrag, false);\n        window.removeEventListener('mouseup', stopDrag, false);\n    };\n\n    const getXYFromDragProps = (\n        clientX: number,\n        clientY: number\n    ): { x: number; y: number } => {\n        if (!dragProps.current) return { x: 0, y: 0 };\n        const { dragStartX, dragStartY } = dragProps.current;\n\n        const x = clientX - dragStartX + left;\n        const y = clientY - dragStartY + top;\n\n        return { x, y };\n    };\n\n    useEffect(() => {\n        dragRef.current.style.transform = `translate(${left}px, ${top}px)`;\n    });\n\n    useEffect(() => {\n        props.onWidthChange && props.onWidthChange(contentWidth);\n    }, [props.onWidthChange, contentWidth]); // eslint-disable-line\n\n    useEffect(() => {\n        props.onHeightChange && props.onHeightChange(contentHeight);\n    }, [props.onHeightChange, contentHeight]); // eslint-disable-line\n\n    useEffect(() => {\n        setContentWidth(contentRef.current.getBoundingClientRect().width);\n    }, [width]);\n\n    useEffect(() => {\n        setContentHeight(contentRef.current.getBoundingClientRect().height);\n    }, [height]);\n\n    const maximize = () => {\n        if (isMaximized) {\n            setWidth(preMaxSize.width);\n            setHeight(preMaxSize.height);\n            setTop(preMaxSize.top);\n            setLeft(preMaxSize.left);\n            setIsMaximized(false);\n        } else {\n            setPreMaxSize({\n                width,\n                height,\n                top,\n                left,\n            });\n            setWidth(window.innerWidth);\n            setHeight(window.innerHeight - 32);\n            setTop(0);\n            setLeft(0);\n            setIsMaximized(true);\n        }\n    };\n\n    const onCheckClick = () => {\n        if (lastClickInside.current) {\n            setWindowActive(true);\n        } else {\n            setWindowActive(false);\n        }\n        lastClickInside.current = false;\n    };\n\n    useEffect(() => {\n        window.addEventListener('mousedown', onCheckClick, false);\n        return () => {\n            window.removeEventListener('mousedown', onCheckClick, false);\n        };\n    }, []);\n\n    const onWindowInteract = () => {\n        props.onInteract();\n        setWindowActive(true);\n        lastClickInside.current = true;\n    };\n\n    return (\n        <div onMouseDown={onWindowInteract} style={styles.container}>\n            <div\n                style={Object.assign({}, styles.window, {\n                    width,\n                    height,\n                    top,\n                    left,\n                })}\n                ref={windowRef}\n            >\n                <div style={styles.windowBorderOuter}>\n                    <div style={styles.windowBorderInner}>\n                        <div\n                            style={styles.dragHitbox}\n                            onMouseDown={startDrag}\n                        ></div>\n                        <div\n                            className={props.rainbow ? 'rainbow-wrapper' : ''}\n                            style={Object.assign(\n                                {},\n                                styles.topBar,\n                                props.windowBarColor && {\n                                    backgroundColor: props.windowBarColor,\n                                },\n                                !windowActive && {\n                                    backgroundColor: Colors.darkGray,\n                                }\n                            )}\n                        >\n                            <div style={styles.windowHeader}>\n                                {props.windowBarIcon ? (\n                                    <Icon\n                                        icon={props.windowBarIcon}\n                                        style={Object.assign(\n                                            {},\n                                            styles.windowBarIcon,\n                                            !windowActive && { opacity: 0.5 }\n                                        )}\n                                        size={16}\n                                    />\n                                ) : (\n                                    <div style={{ width: 16 }} />\n                                )}\n                                <p\n                                    style={\n                                        windowActive\n                                            ? {}\n                                            : { color: colors.lightGray }\n                                    }\n                                    className=\"showcase-header\"\n                                >\n                                    {props.windowTitle}\n                                </p>\n                            </div>\n                            <div style={styles.windowTopButtons}>\n                                <Button\n                                    icon=\"minimize\"\n                                    onClick={props.minimizeWindow}\n                                />\n                                <Button icon=\"maximize\" onClick={maximize} />\n                                <div style={{ paddingLeft: 2 }}>\n                                    <Button\n                                        icon=\"close\"\n                                        onClick={props.closeWindow}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div\n                            style={Object.assign({}, styles.contentOuter, {\n                                // zIndex: isDragging || isResizing ? 0 : 100,\n                            })}\n                        >\n                            <div style={styles.contentInner}>\n                                <div style={styles.content} ref={contentRef}>\n                                    {props.children}\n                                </div>\n                            </div>\n                        </div>\n                        <div\n                            onMouseDown={startResize}\n                            style={styles.resizeHitbox}\n                        ></div>\n                        <div style={styles.bottomBar}>\n                            <div\n                                style={Object.assign({}, styles.insetBorder, {\n                                    flex: 5 / 7,\n                                    alignItems: 'center',\n                                })}\n                            >\n                                <p\n                                    style={{\n                                        fontSize: 12,\n                                        marginLeft: 4,\n                                        fontFamily: 'MSSerif',\n                                    }}\n                                >\n                                    {props.bottomLeftText}\n                                </p>\n                            </div>\n                            <div\n                                style={Object.assign(\n                                    {},\n                                    styles.insetBorder,\n                                    styles.bottomSpacer\n                                )}\n                            />\n                            <div\n                                style={Object.assign(\n                                    {},\n                                    styles.insetBorder,\n                                    styles.bottomSpacer\n                                )}\n                            />\n                            <div\n                                style={Object.assign(\n                                    {},\n                                    styles.insetBorder,\n                                    styles.bottomResizeContainer\n                                )}\n                            >\n                                <div\n                                    style={{\n                                        alignItems: 'flex-end',\n                                    }}\n                                >\n                                    <Icon size={12} icon=\"windowResize\" />\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div\n                style={\n                    !isResizing\n                        ? {\n                              zIndex: -10000,\n                              pointerEvents: 'none',\n                          }\n                        : {\n                              zIndex: 1000,\n                              cursor: 'nwse-resize',\n                              mixBlendMode: 'difference',\n                          }\n                }\n            >\n                <ResizeIndicator\n                    top={top}\n                    left={left}\n                    width={width}\n                    height={height}\n                    resizeRef={resizeRef}\n                />\n            </div>\n            <div\n                style={\n                    !isDragging\n                        ? {\n                              zIndex: -10000,\n                              pointerEvents: 'none',\n                          }\n                        : {\n                              zIndex: 1000,\n                              cursor: 'move',\n                              mixBlendMode: 'difference',\n                          }\n                }\n            >\n                <DragIndicator\n                    width={width}\n                    height={height}\n                    dragRef={dragRef}\n                />\n            </div>\n        </div>\n    );\n};\n\nconst styles: StyleSheetCSS = {\n    window: {\n        backgroundColor: Colors.lightGray,\n        position: 'absolute',\n    },\n    dragHitbox: {\n        position: 'absolute',\n        width: 'calc(100% - 70px)',\n        height: 48,\n        zIndex: 10000,\n        top: -8,\n        left: -4,\n        cursor: 'move',\n    },\n    windowBorderOuter: {\n        border: `1px solid ${Colors.black}`,\n        borderTopColor: colors.lightGray,\n        borderLeftColor: colors.lightGray,\n        flex: 1,\n    },\n    windowBorderInner: {\n        border: `1px solid ${Colors.darkGray}`,\n        borderTopColor: colors.white,\n        borderLeftColor: colors.white,\n        flex: 1,\n        padding: 2,\n\n        flexDirection: 'column',\n    },\n    resizeHitbox: {\n        position: 'absolute',\n        width: 60,\n        height: 60,\n        bottom: -20,\n        right: -20,\n        cursor: 'nwse-resize',\n    },\n    topBar: {\n        backgroundColor: Colors.blue,\n        width: '100%',\n        height: 20,\n\n        alignItems: 'center',\n        paddingRight: 2,\n        boxSizing: 'border-box',\n    },\n    contentOuter: {\n        border: `1px solid ${Colors.white}`,\n        borderTopColor: colors.darkGray,\n        borderLeftColor: colors.darkGray,\n        flexGrow: 1,\n\n        marginTop: 8,\n        marginBottom: 8,\n        overflow: 'hidden',\n    },\n    contentInner: {\n        border: `1px solid ${Colors.lightGray}`,\n        borderTopColor: colors.black,\n        borderLeftColor: colors.black,\n        flex: 1,\n        overflow: 'hidden',\n    },\n    content: {\n        flex: 1,\n\n        position: 'relative',\n        // overflow: 'scroll',\n        overflowX: 'hidden',\n        backgroundColor: Colors.white,\n    },\n    bottomBar: {\n        flexShrink: 1,\n        width: '100%',\n        height: 20,\n    },\n    bottomSpacer: {\n        width: 16,\n        marginLeft: 2,\n    },\n    insetBorder: {\n        border: `1px solid ${Colors.white}`,\n        borderTopColor: colors.darkGray,\n        borderLeftColor: colors.darkGray,\n        padding: 2,\n    },\n    bottomResizeContainer: {\n        flex: 2 / 7,\n\n        justifyContent: 'flex-end',\n        padding: 0,\n        marginLeft: 2,\n    },\n    windowTopButtons: {\n        // zIndex: 10000,\n\n        alignItems: 'center',\n    },\n    windowHeader: {\n        flex: 1,\n        // justifyContent: 'center',\n        // alignItems: 'center',\n    },\n    windowBarIcon: {\n        paddingLeft: 4,\n        paddingRight: 4,\n    },\n};\n\nexport default Window;\n"]},"metadata":{},"sourceType":"module"}